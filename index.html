<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ChaterLab Quick Replies</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tiny.cloud/1/2vkf90yplt2jwzdkcxwwk0cnde1wl6wmoaou6uauoogheruk/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@2.3.1/build/global/luxon.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="login-active">
    <div id="animation-overlay"><div class="animation-content"><h1>ChaterLab</h1></div></div>
    
    <div id="login-screen">
        <div class="login-background"></div>
        <div class="login-form-container">
            <h1 data-key="loginHeader">ChaterLab</h1>
            <p data-key="loginSubheader">Панель быстрых ответов</p>
            <div id="language-switcher-login">
                <button data-lang="ru" class="lang-btn">RU</button>
                <button data-lang="en" class="lang-btn">EN</button>
                <button data-lang="uk" class="lang-btn">UA</button>
            </div>
            <form id="login-form">
                <input type="text" id="login-username" required data-key="loginUsername" placeholder="Логин">
                <input type="password" id="login-password" required data-key="loginPassword" placeholder="Пароль">
                <button type="submit" data-key="loginBtn">Войти</button>
                <div id="login-error"></div>
            </form>
        </div>
    </div>
    
    <div id="app-container" data-logged="false">
        <!-- Desktop Header -->
        <header class="desktop-only">ChaterLab Quick Replies</header>
        
        <!-- Mobile Header -->
        <header class="mobile-only mobile-header">
            <button id="mobile-back-btn" class="mobile-back-btn" style="display: none;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <span id="mobile-header-title">ChaterLab</span>
            <div class="mobile-header-spacer"></div>
        </header>
        
        <main>
            <!-- Desktop Sidebar -->
            <div class="sidebar desktop-only">
                <div class="sidebar-scrollable-content">
                    <div class="search-wrapper"><input type="search" id="searchInput" data-key="searchPlaceholder"></div>
                    <div id="favorites-section" class="sidebar-section" style="display: none;">
                        <h2 data-key="favoritesTitle">⭐ Избранное</h2>
                        <div id="favorites-content"></div>
                    </div>
                    <div id="sidebar-content"></div>
                </div>
                <div class="sidebar-footer">
                    <div id="language-switcher-app">
                        <button data-lang="ru" class="lang-btn-app">RU</button>
                        <button data-lang="en" class="lang-btn-app">EN</button>
                        <button data-lang="uk" class="lang-btn-app">UA</button>
                    </div>
                    <div class="theme-switch-wrapper">
                        <div class="theme-switch-label" data-key="darkMode">Тёмная тема</div>
                        <label class="theme-switch" for="theme-checkbox">
                            <input type="checkbox" id="theme-checkbox" />
                            <div class="slider round"></div>
                        </label>
                    </div>
                    <button onclick="logout()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <path d="M16 17l5-5-5-5"/>
                            <path d="M21 12H9"/>
                        </svg>
                        <span data-key="logout">Выйти</span>
                    </button>
                </div>
            </div>
            
            <!-- Mobile Content Wrapper -->
            <div class="mobile-content-wrapper mobile-only">
                <!-- Templates Screen -->
                <div id="mobile-templates-screen" class="mobile-screen active">
                    <div class="search-wrapper mobile-search">
                        <input type="search" id="searchInputMobile" data-key="searchPlaceholder">
                    </div>
                    <div id="mobile-favorites-section" class="mobile-section" style="display: none;">
                        <h2 data-key="favoritesTitle">⭐ Избранное</h2>
                        <div id="mobile-favorites-content"></div>
                    </div>
                    <div id="mobile-sidebar-content"></div>
                </div>
                
                <!-- Instructions Screen -->
                <div id="mobile-instructions-screen" class="mobile-screen">
                    <div class="mobile-instructions" id="mobile-instructions"></div>
                </div>
                
                <!-- Menu Screen -->
                <div id="mobile-menu-screen" class="mobile-screen">
                    <div id="mobile-user-status-card"></div>
                    <div class="mobile-menu-items">
                        <button id="mobile-open-editor-btn" class="mobile-menu-item" style="display: none;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                            </svg>
                            <span data-key="navEditor">Редактор</span>
                        </button>
                        <button id="mobile-analytics-btn" class="mobile-menu-item">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 3v18h18"/>
                                <path d="M18 17V9"/>
                                <path d="M13 17V5"/>
                                <path d="M8 17v-3"/>
                            </svg>
                            <span data-key="navAnalytics">Аналитика</span>
                        </button>
                        <button id="mobile-theme-toggle" class="mobile-menu-item">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                            </svg>
                            <span data-key="darkMode">Тёмная тема</span>
                            <div class="mobile-toggle-switch">
                                <input type="checkbox" id="mobile-theme-checkbox" />
                                <div class="mobile-slider"></div>
                            </div>
                        </button>
                        <div class="mobile-menu-item mobile-language-selector">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M2 12h20"/>
                                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                            </svg>
                            <div class="mobile-lang-buttons">
                                <button data-lang="ru" class="mobile-lang-btn">RU</button>
                                <button data-lang="en" class="mobile-lang-btn">EN</button>
                                <button data-lang="uk" class="mobile-lang-btn">UA</button>
                            </div>
                        </div>
                        <button onclick="logout()" class="mobile-menu-item mobile-logout">
                            <svg width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                                <path d="M16 17l5-5-5-5"/>
                                <path d="M21 12H9"/>
                            </svg>
                            <span data-key="logout">Выйти</span>
                        </button>
                    </div>
                </div>
                
                <!-- Analytics Screen -->
                <div id="mobile-analytics-screen" class="mobile-screen">
                    <div class="mobile-analytics-stub" id="mobile-analytics-stub">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M3 3v18h18"/>
                            <path d="M18 17V9"/>
                            <path d="M13 17V5"/>
                            <path d="M8 17v-3"/>
                        </svg>
                        <h3>Аналитика</h3>
                        <p>Доступна только менеджерам</p>
                    </div>
                    <div id="mobile-analytics-content" style="display: none;"></div>
                </div>
                
                <!-- Editor Screen -->
                <div id="mobile-editor-screen" class="mobile-screen">
                    <div class="mobile-editor-tabs">
                        <button data-tab="layout" class="active" data-key="tabLayout">Кнопки</button>
                        <button data-tab="instructions" data-key="tabInstructions">Инструкция</button>
                        <button data-tab="managers" data-key="tabManagers">Менеджеры</button>
                        <button data-tab="users" data-key="tabUsers">Пользователи</button>
                    </div>
                    <div class="mobile-editor-content">
                        <div id="mobile-editor-notice" class="editor-unavailable-notice">
                            <h4 data-key="editorUnavailable">Редактор</h4>
                            <p data-key="editorUnavailableMsg">Полноценное редактирование доступно только в версии сайта для ПК.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Desktop Info Block -->
            <div class="info desktop-only" id="infoBlock">
                <div class="info-header-controls">
                    <div id="user-status-card"></div>
                    <div class="manager-controls-segmented" style="display: none;">
                        <div class="glider"></div>
                        <button id="show-instructions-btn" data-key="navInstructions" class="active">Инструкция</button>
                        <button id="show-analytics-btn" data-key="navAnalytics">Аналитика</button>
                        <button id="edit-mode-btn" data-key="navEditor">Редактор</button>
                    </div>
                </div>
                <div id="main-content-wrapper">
                    <div class="instructions" id="instructions"></div>
                    <div id="content-editor" style="display: none;">
                        <div class="editor-main-controls">
                            <div class="editor-tabs">
                                <button id="tab-btn-layout" class="active" data-key="tabLayout">Конструктор кнопок</button>
                                <button id="tab-btn-instructions" data-key="tabInstructions">Инструкция</button>
                                <button id="tab-btn-managers" data-key="tabManagers">Менеджеры</button>
                                <button id="tab-btn-users" data-key="tabUsers">Пользователи</button>
                            </div>
                            <div class="editor-buttons">
                                <button id="save-content-btn" data-key="saveAll">Сохранить всё</button>
                                <button id="cancel-edit-btn" data-key="cancel">Отмена</button>
                            </div>
                        </div>
                        <div id="panel-layout" class="editor-panel active">
                            <button class="add-btn" id="add-section-btn" data-key="addSection">+ Добавить новый раздел</button>
                        </div>
                        <div id="panel-instructions" class="editor-panel">
                            <div class="editor-section"><h4 data-key="instructionTitleRu">Инструкция (RU)</h4><textarea id="instructions-editor-ru" style="width:100%;min-height:300px"></textarea></div>
                            <div class="editor-section"><h4 data-key="instructionTitleEn">Инструкция (EN)</h4><textarea id="instructions-editor-en" style="width:100%;min-height:300px"></textarea></div>
                            <div class="editor-section"><h4 data-key="instructionTitleUk">Инструкция (UA)</h4><textarea id="instructions-editor-uk" style="width:100%;min-height:300px"></textarea></div>
                        </div>
                        <div id="panel-managers" class="editor-panel">
                            <button class="add-btn" id="add-manager-btn" data-key="addManager">+ Добавить менеджера</button>
                        </div>
                        <div id="panel-users" class="editor-panel">
                            <div class="editor-section">
                                <h4 data-key="addUserTitle">Добавить нового пользователя</h4>
                                <form id="add-user-form">
                                    <input type="text" id="new-username" required data-key="newUserUsername" placeholder="Логин">
                                    <input type="password" id="new-password" required data-key="newUserPassword" placeholder="Пароль">
                                    <select id="new-user-role">
                                        <option value="employee" data-key="roleEmployee">Сотрудник</option>
                                        <option value="manager" data-key="roleManager">Менеджер</option>
                                    </select>
                                    <button type="submit" class="add-btn" data-key="addUserBtn">Создать</button>
                                </form>
                            </div>
                            <div class="editor-section">
                                <h4 data-key="existingUsersTitle">Существующие пользователи</h4>
                                <div id="user-list"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="analytics-panel">
                    <div class="analytics-container">
                        <div class="analytics-sidebar">
                            <div class="analytics-sidebar-header">
                                <div class="analytics-period-selector">
                                    <button data-period="day" class="active" data-key="periodDay">День</button>
                                    <button data-period="week" data-key="periodWeek">Неделя</button>
                                    <button data-period="month" data-key="periodMonth">Месяц</button>
                                </div>
                            </div>
                            <ul id="employee-list" class="employee-list"></ul>
                        </div>
                        <div id="analytics-main" class="analytics-main"></div>
                    </div>
                </div>
            </div>
            
            <!-- Mobile Bottom Navigation -->
            <nav class="mobile-bottom-nav mobile-only">
                <button data-screen="templates" class="nav-item active">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M8 17.929H6c-1.105 0-2-.912-2-2.036V5.036C4 3.91 4.895 3 6 3h8c1.105 0 2 .911 2 2.036v1.866m-6 .17h8c1.105 0 2 .91 2 2.035v10.857C20 21.09 19.105 22 18 22h-8c-1.105 0-2-.911-2-2.036V9.107c0-1.124.895-2.036 2-2.036z"/>
                    </svg>
                    <span>Шаблоны</span>
                </button>
                <button data-screen="instructions" class="nav-item">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <path d="M14 2v6h6"/>
                        <path d="M16 13H8"/>
                        <path d="M16 17H8"/>
                        <path d="M10 9H8"/>
                    </svg>
                    <span data-key="navInstructions">Инструкция</span>
                </button>
                <button data-screen="menu" class="nav-item">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 1v6m0 6v6"/>
                        <circle cx="12" cy="12" r="10"/>
                    </svg>
                    <span>Меню</span>
                </button>
            </nav>
        </main>
    </div>
    
    <div id="toast" class="toast-notification"></div>

    <div id="contact-generator-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 data-key="modalTitle">Создание контакта</h3>
            <div class="modal-section">
                <h4 data-key="modalChannelTitle">1. Выберите канал связи</h4>
                <div class="modal-radio-group">
                    <input type="radio" id="channel-telegram" name="channel" value="Telegram" checked>
                    <label for="channel-telegram" tabindex="0">
                        <span>Telegram</span>
                    </label>
                    <input type="radio" id="channel-whatsapp" name="channel" value="WhatsApp">
                    <label for="channel-whatsapp" tabindex="0">
                        <span>WhatsApp</span>
                    </label>
                </div>
            </div>
            <div class="modal-section">
                <h4 data-key="modalManagerTitle">2. Выберите менеджера</h4>
                <select id="manager-select" class="modal-select"></select>
            </div>
            <div class="modal-buttons">
                <button id="modal-cancel-btn" data-key="modalCancel">Отмена</button>
                <button id="modal-confirm-btn" data-key="modalConfirm">Сгенерировать и скопировать</button>
            </div>
        </div>
    </div>

    <script src="assets/script.js"></script>
</body>
</html>